import { Executor } from "../../ifaces";
import { Cardinality } from "../enums";
import type { UUID } from "./queryTypes";
import { StrictMap } from "../strictMap";
export declare type Pointer = {
    card: Cardinality;
    kind: "link" | "property";
    name: string;
    target_id: UUID;
    is_exclusive: boolean;
    is_computed: boolean;
    is_readonly: boolean;
    has_default: boolean;
    pointers: ReadonlyArray<Pointer> | null;
};
export declare type Backlink = Pointer & {
    kind: "link";
    pointers: null;
    stub: string;
};
export declare type TypeKind = "object" | "scalar" | "array" | "tuple" | "range" | "unknown";
export declare type TypeProperties<T extends TypeKind> = {
    id: UUID;
    kind: T;
    name: string;
};
export declare type ScalarType = TypeProperties<"scalar"> & {
    is_abstract: boolean;
    is_seq: boolean;
    bases: ReadonlyArray<{
        id: UUID;
    }>;
    enum_values: ReadonlyArray<string> | null;
    material_id: UUID | null;
    cast_type?: UUID;
};
export declare type ObjectType = TypeProperties<"object"> & {
    is_abstract: boolean;
    bases: ReadonlyArray<{
        id: UUID;
    }>;
    union_of: ReadonlyArray<{
        id: UUID;
    }>;
    intersection_of: ReadonlyArray<{
        id: UUID;
    }>;
    pointers: ReadonlyArray<Pointer>;
    backlinks: ReadonlyArray<Backlink>;
    backlink_stubs: ReadonlyArray<Backlink>;
    exclusives: {
        [k: string]: Pointer;
    }[];
};
export declare type ArrayType = TypeProperties<"array"> & {
    array_element_id: UUID;
    is_abstract: boolean;
};
export declare type TupleType = TypeProperties<"tuple"> & {
    tuple_elements: ReadonlyArray<{
        name: string;
        target_id: UUID;
    }>;
    is_abstract: boolean;
};
export declare type RangeType = TypeProperties<"range"> & {
    range_element_id: UUID;
    is_abstract: boolean;
};
export declare type PrimitiveType = ScalarType | ArrayType | TupleType | RangeType;
export declare type Type = PrimitiveType | ObjectType;
export declare type Types = StrictMap<UUID, Type>;
export declare const typeMapping: Map<string, ScalarType>;
export declare function _types(cxn: Executor, params?: {
    debug?: boolean;
}): Promise<Types>;
export declare function topoSort(types: Type[]): StrictMap<string, Type>;
export { _types as types };
