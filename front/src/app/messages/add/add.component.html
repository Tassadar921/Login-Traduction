<ion-searchbar [(ngModel)]="filter" (ionChange)="setUsers(1)"></ion-searchbar>

<div *ngFor="let user of users" class="user">
  <div *ngIf="!waiting">
    <p>{{user.username}}</p>
    <ion-button fill="clear" *ngIf="!user.boolFriend[0]
      && !user.boolExitingFriendRequest[0]
      && !user.boolEnteringFriendRequest[0]"
                (click)="addFriend(user.username)">
      <ion-icon name="person-add" slot="icon-only" color="success"></ion-icon>
    </ion-button>

    <div *ngIf="user.boolFriend[0]">
      <ion-button fill="clear" (click)="actionSheetRemoveFriend(user.username)">
        <ion-icon name="person-remove" slot="icon-only" color="danger"></ion-icon>
      </ion-button>
    </div>

    <div *ngIf="user.boolExitingFriendRequest[0]">
      <p>Request sent</p>
      <ion-button fill="clear" (click)="cancelFriendRequest(user.username)">
        <ion-icon name="close" slot="icon-only" color="danger"></ion-icon>
      </ion-button>
    </div>

    <div *ngIf="user.boolEnteringFriendRequest[0]">
      <p>Answer request</p>
      <ion-button fill="clear" (click)="addFriend(user.username)">
        <ion-icon name="checkmark" slot="icon-only" color="success"></ion-icon>
      </ion-button>
      <ion-button fill="clear" (click)="refuseFriendRequest(user.username)">
        <ion-icon name="close" slot="icon-only" color="danger"></ion-icon>
      </ion-button>
    </div>

    <ion-button fill="clear" (click)="actionSheetBlockUser(user.username)">
      <ion-icon name="trash" slot="icon-only" color="danger"></ion-icon>
    </ion-button>
  </div>
  <ion-spinner color="light" *ngIf="waiting"></ion-spinner>
</div>

<ion-footer>
  <ion-row>
    <ion-col>
      <ion-button fill="clear" (click)="setUsers(currentPage-1)" [disabled]="currentPage === 1">
        <ion-icon name="arrow-back" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-col>
    <ion-col>
      <ion-label>{{currentPage}}/{{pagesNumber}}</ion-label>
    </ion-col>
    <ion-col>
      <ion-button fill="clear" (click)="setUsers(currentPage+1)" [disabled]="currentPage === pagesNumber">
        <ion-icon name="arrow-forward" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-col>
  </ion-row>
</ion-footer>
